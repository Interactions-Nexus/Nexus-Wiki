<!--
title: 查询
description: 查询 DSL（域特定语言）
published: true
date: 2022-12-20T08:45:02.729Z
tags: 
editor: ckeditor
dateCreated: 2022-12-20T08:35:22.547Z
-->

<h1>查询</h1>
<p>Query 查询 DSL（Domian Specific Language 域特定语言）允许递归地排序和过滤到任何逻辑深度。 此 DSL 可与运算符结合使用，以实时排序、过滤和计算数据。<br>Query 查询 DSL 可以应用于所有带有 <code><strong>where</strong></code> 参数的 5.1 版本的 <code>list</code>&nbsp;列表和 <code>get</code>&nbsp;获取 API 应用程式界面命令</p>
<h3><code>Selector Keys</code> 选择键</h3>
<p>此 API 应用程式界面命令集支持以下运算符：</p>
<p>[<code>object</code>] - This selector key will evaluate the comparison on the raw binary object.<br>[<code>results</code>] - This selector key will evaluate the comparison on the results json.</p>
<h3>Supported Objects</h3>
<p>The following object classes are supported:</p>
<ul>
  <li>object - operates on a raw object register</li>
  <li>results - operates and filters based on the JSON results. This can be about 10x slower, so use sparingly.</li>
</ul>
<h3>Using wildcards</h3>
<p>If you are searching by a string parameter, you can include '*' as an any character wildcard match, so that you can search values based on a partial match.</p>
<pre><code class="language-plaintext">register/list/accounts WHERE 'object.name=d*'
</code></pre>
<p>The above will return all accounts that start with a letter 'd'.</p>
<h4>Following wildcard</h4>
<p>The following demonstrates how to check with wildcards.</p>
<pre><code class="language-plaintext">register/list/accounts WHERE 'object.name=*d'
</code></pre>
<p>This above will return all accounts that have a name ending with letter 'd'.</p>
<h3>Examples</h3>
<p>To filter, you can use where='statements' or follow the command with WHERE string:</p>
<h4>Filtering objects with WHERE clause</h4>
<p>The below clause will filter all name object registers, that are Global names that start with letter 'P', or any objects that start with letter 'S'.</p>
<pre><code class="language-plaintext">register/list/names WHERE '(object.namespace=*GLOBAL* AND object.name=P*) OR object.name=S*'
</code></pre>
<p>Using the object class i.e. 'object.namespace' will invoke the filter on the binary object.</p>
<h4>Filtering objects with where=</h4>
<p>The below clause will filter all name object registers, that are Global names that start with letter 'P', or any objects that start with letter 'S'.</p>
<pre><code class="language-plaintext">register/list/names where='(object.namespace=*GLOBAL* AND object.name=P*) OR object.name=S*'
</code></pre>
<h4>Filtering with multiple operators</h4>
<p>The below will return all NXS accounts that have a balance greater than 10 NXS.</p>
<pre><code class="language-plaintext">register/list/accounts WHERE 'object.token=0 AND object.balance&gt;10'
</code></pre>
<h4>Creating logical grouping</h4>
<p>The following demonstrates how to query using multiple recursive levels.</p>
<pre><code class="language-plaintext">register/list/accounts WHERE '(object.token=0 AND object.balance&gt;10) OR (object.token=8Ed7Gzybwy3Zf6X7hzD4imJwmA2v1EYjH2MNGoVRdEVCMTCdhdK AND object.balance&gt;1)'
</code></pre>
<p>This will give all NXS accounts with balance greater than 10, or all accounts for token '8Ed7Gzybwy3Zf6X7hzD4imJwmA2v1EYjH2MNGoVRdEVCMTCdhdK' with balance greater than 1.</p>
<h4>More complex queries</h4>
<p>There is no current limit to the number of levels of recursion, such as:</p>
<pre><code class="language-plaintext">register/list/names WHERE '((object.name=d* AND object.namespace=~GLOBAL~) OR (object.name=e* AND object.namespace=send.to)) OR object.namespace=*s'
</code></pre>
<p>The above command will return all objects starting with letter 'd' that are global names, or all objects starting with letter 'e' in the '<a href="http://send.to">send.to</a>' namespace, or finally all objects that are in a namespace that ends with the letter 's'.</p>
